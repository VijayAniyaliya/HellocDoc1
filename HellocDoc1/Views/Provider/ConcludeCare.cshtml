@model Services.Models.ConcludeCareViewModel

@{
    ViewData["Title"] = "ConcludeCase";
    Layout = "~/Views/Shared/_ProviderDashboardLayout.cshtml";
}

<div class="container">
    <div class="d-flex justify-content-between pt-3">
        <h4>Conclude Care</h4>
        <a asp-area="" asp-action="ProviderDashboard" class="btn border-2 border-info text-info p-2 px-3 fw-bold">
            &lt;  Back
        </a>

    </div>
    <div class="shadow">
        <div class="px-3 pt-4 Document-content mt-3" style="">

            <div class="pr-3">
                <div class="h6 text-secondary">Patient Name</div>
                <div class="h5 text-info d-inline-block">@Model.PatientName</div>
            </div>
        </div>


        <div class="py-3 px-3 h5 fw-bold d-flex justify-content-between">
            <div>Encounter Forms</div>
            <form asp-action="UploadEncounter" asp-controller="Provider" asp-route-request_id="@Model.RequestId" id="uploadForm" method="post" enctype="multipart/form-data">
                <div class="file btn text-info border-info mr-3">
                    <i class="bi bi-cloud-arrow-up"></i>
                    Upload
                    <input type="file" asp-for="Upload" id="BackgoundDoc" class="selectfile" onchange="submitForm()" accept=".pdf,.png" />
                </div>
            </form>

        </div>
        <div class="table-responsive mt-2 d-md-block d-none">
            <table class="table">
                <thead>
                    <tr class="table-secondary">
                        <th scope="col" style="width:55%">Documents</th>
                        <th class="text-center" scope="col" style="width:15%">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Documents.Count() > 0)
                    {
                        @foreach (var item in Model.Documents!)
                        {
                            <tr>
                                <td>@item</td>
                                <td class="text-center">
                                    <a href="~/uploads/@item" target="_blank" id="viewagreement" class="btn bg-info text-white h5 mb-0 view">View</a>
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>No Documents Found</tr>
                    }
                </tbody>
            </table>
        </div>
        <hr />
        <div class="h5 ps-3">Provider Notes</div>
        <form asp-action="ConcludeCase" asp-route-request_id="@Model.RequestId">
            <div class="col-12">
                <div class="form-floating mb-3">
                    <textarea class="form-control" asp-for="ProviderNotes" placeholder="Provider Notes"
                              id="floatingTextarea2" style="height: 100px"></textarea>
                    <label for="floatingTextarea2" class="">
                        Provider Notes
                    </label>
                </div>
                <span asp-validation-for="ProviderNotes" class="text-danger"></span>
            </div>
            <div class="text-end">
                <button type="submit" class="btn bg-info text-white rounded-3 mr-3 fw-bold px-4 h5 modify">Conclude Care</button>
            </div>
        </form>
        <br />
        <br />
        <br />
    </div>


    <br />
    <br />
</div>

<br />
<br />

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

<script>
    function submitForm() {
        document.getElementById("uploadForm").submit();
    }
</script>