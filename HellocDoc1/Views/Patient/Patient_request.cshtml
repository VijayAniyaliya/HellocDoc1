@{
    ViewData["Title"] = "Patient_request_screen";
    Layout = "~/Views/Shared/_PatientLayout.cshtml";
}

@model HellocDoc1.Services.Models.PatientRequestModel
@using Common.Enum

<div class="body-content container mb-3">


    <div class="mb-2 mr-1 d-flex justify-content-end">
        <a asp-area="" asp-controller="Patient" asp-action="Submit_request_screen" class="btn back-btn border border-info text-info p-2">
            &lt; Back
        </a>
    </div>

    <div class="main-content px-4 py-3 shadow-lg">
        <form enctype="multipart/form-data" method="post">


            <div class="patient-info">
                <div class="h5 mb-4">Patient-information</div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-floating mb-3">
                            <textarea asp-for="Symptoms" class="form-control" placeholder="enter patient information"
                                      id="floatingTextarea2" style="height: 100px"></textarea>
                            <label for="floatingTextarea2" class="">
                                Enter Brief Details Of Symptoms
                                (Optional)
                            </label>
                            <span asp-validation-for="Symptoms" class="text-danger"></span>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="FirstName" class="form-control" id="floatingInput" placeholder="first name" />
                            <label for="floatingInput" class="">First Name</label>
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="LastName" class="form-control" id="floatingInput" placeholder="last name" />
                            <label for="floatingInput" class="">Last Name</label>
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="date" asp-for="DOB" class="form-control" id="floatingInput" placeholder="last name" max="@DateTime.Now.ToString("yyyy-MM-dd")" />
                            <label for="floatingInput" class="">Date of Birth</label>
                            <span asp-validation-for="DOB" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contact-info">
                <div class="h5 mb-4 mt-4">Patient Contact Information</div>

                <div class="row">

                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="email" asp-for="Email" class="form-control" id="patientEmail"
                                   placeholder="abc@gmail.com" onblur="checkEmailExists()" />
                            <label for="floatingInput" class="">Email</label>
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating  mb-3">
                            <input type="tel" asp-for="PhoneNumber" class="form-control pt-3 pb-3" id="phone">
                            <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6 passDisplay" id="passwordFields1">
                        <div class="form-floating mb-3">
                            <input type="password" asp-for="Password" class="form-control" id="password"
                                   placeholder="Password" />
                            <label for="password" class="">Password</label>
                            <i class="bi bi-eye eye-icon" id="eye" onclick="fun()"></i>
                            <span asp-validation-for="Password" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6 passDisplay" id="passwordFields2">
                        <div class="form-floating mb-3">
                            <input type="password" asp-for="ConfirmPassword" class="form-control" id="cpassword"
                                   placeholder="ConfirmPassword" />
                            <label for="cpassword" class="">Confirm Password</label>
                            <i class="bi bi-eye eye-icon" id="eye2" onclick="fun2()"></i>
                            <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                        </div>
                    </div>


                </div>
            </div>

            <div class="location-info">
                <div class="h5 mb-4 mt-4">Patient Location</div>

                <div class="row">

                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="Street" class="form-control" id="floatingInput"
                                   placeholder="street address" />
                            <label for="floatingInput" class="">Street</label>
                            <span asp-validation-for="Street" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="City" class="form-control" id="floatingInput" placeholder="city" />
                            <label for="floatingInput" class="">City</label>
                            <span asp-validation-for="City" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating">
                            <select class="form-select py-0 text-secondary" asp-for="State" id="state" aria-label="Floating label select example">
                                <option selected disabled>State</option>
                                @foreach (var item in Enum.GetValues(typeof(Regions)))
                                {
                                    <option value="@((int)item)">@item.ToString()</option>
                                }
                            </select>
                            <label for="state"></label>
                            <span asp-validation-for="State" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="ZipCode" class="form-control" id="floatingInput" placeholder="zip codes" />
                            <label for="floatingInput" class="">Zip Code</label>
                            <span asp-validation-for="ZipCode" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-floating mb-3">
                            <input type="text" asp-for="Room" class="form-control" id="floatingInput" placeholder="room" />
                            <label for="floatingInput" class="">Room # / Suite (Optional)</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="doc-upload">
                <div class="h5 mb-4 mt-4">(Optional) Upload Photo or Document</div>

                <div class="input-group mb-3 border d-flex justify-content-between flex-row">
                    <input type="file" asp-for="Doc" class="form-control" id="inputGroupFile02" style="display: none;" multiple>
                    <label class="my-auto ms-2" id="fileselect">Select file</label>
                    <label class=" bg-info text-white d-flex flex-row mb-0 p-2 border rounded-3" for="inputGroupFile02">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#ffffff"
                             class="bi bi-cloud-upload my-auto mx-1" viewBox="0 0 16 16">
                            <path fill-rule="evenodd"
                                  d="M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383" />
                            <path fill-rule="evenodd"
                                  d="M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708z" />
                        </svg>
                        <p class="m-0">Upload</p>
                    </label>


                </div>

            </div>

            <div class="mb-1 mt-4 d-flex justify-content-end gap-3">
                <button type="submit" id="submit" class="btn submit-btn border border-info bg-info text-white p-2">
                    Submit
                </button>
                <button type="reset" id="cancel" class="btn cancel-btn border border-info text-info p-2">
                    Cancel
                </button>
            </div>


        </form>
    </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script>
    function checkEmailExists() {

        var email = document.getElementById("patientEmail").value;
        fetch('/Patient/patient_request/checkmail/' + email)
            .then(response => response.json())
            .then(data => {
                var patientPassword = document.getElementById('passwordFields1');
                var patientConfirmPassword = document.getElementById('passwordFields2');
                if (data) {
                    patientPassword.style.display = 'none';
                    patientConfirmPassword.style.display = 'none';
                }
                else {
                    patientPassword.style.display = 'block';
                    patientConfirmPassword.style.display = 'block';
                }
            })
        // .catch(error => console.error('Error:', error));
    }

    // $('#cancel').on('click', function () {
    //     $('form span').hide();
    // })

        
    // $('#submit').on('click', function () {
    //     $('form span').show();
    // })

    const path = document.getElementById("eye");
    const password = document.getElementById('password')
    const cpassword = document.getElementById('cpassword')
    const eye2 = document.getElementById("eye2");
    function fun() {
        if (password.type === "password") {
            path.classList.remove("bi-eye-slash-fill");
            path.classList.add("bi-eye-fill");
            password.type = "text";
        }
        else {
            path.classList.remove("bi-eye-fill");
            path.classList.add("bi-eye-slash-fill");
            password.type = "password";
        }
    }
    function fun2() {
        if (cpassword.type === "password") {
            eye2.classList.remove("bi-eye-slash-fill");
            eye2.classList.add("bi-eye-fill");
            cpassword.type = "text";
        }
        else {
            eye2.classList.remove("bi-eye-fill");
            eye2.classList.add("bi-eye-slash-fill");
            cpassword.type = "password";
        }
    }
</script>

