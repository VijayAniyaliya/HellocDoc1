@model List<Data.Entity.Request>

@{
    ViewData["Title"] = "Patient_Dashboard";
    Layout = "~/Views/Shared/_PatientDashboardLayout.cshtml";
}

<!-- Button trigger modal -->
<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-info text-white">
                <h5 class="modal-title" id="staticBackdropLabel">Create New Request</h5>
                <button type="button" class="btn-close bg-black" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="text-secondary">Here, I want to create mew request for...</p>
                <div class="d-flex justify-content-center gap-2">
                    <a id="button1" onclick="passId(event)" class="btn border border-info text-info  me">Me</a>
                    <a id="button2" onclick="passId(event)" class="btn border border-info text-info someone">Someone One Else</a>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn bg-info text-white" onclick="redirect()">Continue</button>
                <button type="button" class="btn border border-info text-info" data-bs-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>


<div class="align-items-center justify-content-center pt-5">
    <div class=" mx-auto" style="width:95%">
        <h4 class="">Medical History</h4>
        <div class="px-2 shadow dashboard-content" style="">

            <button type="button"
                    class="btn text-info border-1 border-info float-end my-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                Create New Request
            </button>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col">Created Date ↓</th>
                            <th scope="col">Current Status</th>
                            <th scope="col">Document</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {

                            <tr>
                                <td>@item.CreatedDate</td>
                                <td>
                                    @switch (item.Status)
                                    {
                                        case 1:
                                            <p>new</p>
                                            break;
                                        case 2:
                                            <p>pending</p>
                                            break;
                                        case 3:
                                            <p>active</p>
                                            break;
                                        case 4:
                                            <p>conclude</p>
                                            break;
                                        case 5:
                                            <p>to close</p>
                                            break;
                                        case 6:
                                            <p>unpaid</p>
                                            break;
                                        default:
                                            <p>clear</p>
                                            break;
                                    }
                                </td>
                                <td>
                                    <a asp-controller="Patient" asp-route-request_id="@item.RequestId" asp-action="Patient_Document" class="btn text-info border-1 border-info">(@item.RequestWiseFiles.Count) Document</a>
                                </td>
                            </tr>

                        }
                    </tbody>
                </table>
            </div>


        </div>
        <br />
        <br />
        <br />
        <div class="px-2 shadow dashboard-content-aco" style="">

            <button type="button"
                    class="btn text-info border-1 border-info float-end my-2" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                <span class="h5 fw-bold">+</span>

            </button>
            <div class="accordion accordion-flush" id="accordionFlushExample">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingOne">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                            Created Date
                        </button>
                    </h2>
                    <div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
                        <div class="accordion-body">Placeholder content for this accordion, which is intended to demonstrate the <code>.accordion-flush</code> class. This is the first item's accordion body.</div>
                    </div>
                </div>

            </div>



        </div>
    </div>
</div>



@if (TempData["Success"] != null)
{
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script type="text/javascript">
        toastr.success('@TempData["Success"]');
    </script>
}

<script>
    let buttonId = null;

    function passId(event) {
        buttonId = event.target.id;
        var me = document.getElementById('button1');
        var someone = document.getElementById('button2');
        if (buttonId === 'button1') {
            me.classList.add('btn-info', 'text-white');
            me.classList.remove('text-info');
            someone.classList.remove('btn-info');
            someone.classList.add('text-info');
        }
        else if (buttonId === 'button2') {
            someone.classList.add('btn-info', 'text-white');
            someone.classList.remove('text-info');
            me.classList.remove('btn-info');
            me.classList.add('text-info');
        }
    }

    function redirect() {
        if (buttonId === 'button1') {
            location.assign('SubmitInformationMe');
        }
        else if (buttonId === 'button2') {
            location.assign('SubmitInformationSomeone');
        } else {
            // Default redirection if buttonId is not set or unexpected
        }
    }
</script>
