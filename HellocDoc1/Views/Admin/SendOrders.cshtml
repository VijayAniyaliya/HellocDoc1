@{
    ViewData["Title"] = "SendOrders";
    Layout = "~/Views/Shared/_AdminDashboardLayout.cshtml";
}
@model Services.Models.SendOrdersViewModel

<div class="container">
    <div class="d-flex justify-content-between pt-3">
        <h4>Documents</h4>
        <a asp-area="" asp-action="AdminDashboard" class="btn border-2 border-info text-info p-2 px-3 fw-bold">
            &lt;  Back
        </a>

    </div>
    <div class="mt-3 border rounded-3 shadow pt-3 px-3">
        <div class="row">
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    <select class="form-select text-secondary py-0 profession" id="floatingSelect" aria-label="Floating label select example">
                        <option selected disabled>Select Profession</option>
                        @foreach (var item in Model.HealthProfessions)
                        {
                            <option value="@item.ProfessionId">@item.ProfessionName</option>
                        }
                    </select>
                    <label for="floatingSelect"></label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    <select class="form-select text-secondary py-0" id="business" aria-label="Floating label select example">
                        <option selected disabled>Business</option>
                    </select>
                    <label for="business"></label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="contact"
                           placeholder="business contact" />
                    <label for="contact" class="">Business Contact</label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="email"
                           placeholder="abc@gmail.com" />
                    <label for="email" class="">Email</label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="faxnumber"
                           placeholder="fax number" />
                    <label for="faxnumber" class="">Fax Number</label>
                </div>
            </div>
            <div class="col-12">
                <div class="form-floating mb-3">
                    <textarea class="form-control" placeholder="order details"
                              id="floatingTextarea2" style="height: 100px"></textarea>
                    <label for="floatingTextarea2" class="">
                        Prescription or Order details
                    </label>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-floating">
                    <select class="form-select" id="floatingSelect" aria-label="Floating label select example">
                        <option selected>Not Required</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                    </select>
                    <label for="floatingSelect">Number Of Refil</label>
                </div>
            </div>
        </div>
        <div class="footer mt-5 mb-4 text-end">
            <button type="submit" class="btn bg-info text-white">Submit</button>
            <button type="button" class="btn border border-info text-info" data-bs-dismiss="modal">Cancel</button>
        </div>
    </div>
    <br />
    <br />
    <br />

</div>
@section Scripts{
    <script>
        $('.profession').on('change', function (e) {
            var ProfessionId = $(this).val();
            console.log(ProfessionId);

            $.ajax({
                url: '/Admin/FilterDataByProfession',
                data: { "ProfessionId": ProfessionId },
                success: function (response) {
                    var business = $('#business');
                    var contact = document.getElementById("contact");
                    var email = document.getElementById("email");
                    var faxnumber = document.getElementById("faxnumber");

                    business.empty();
                    business.append($('<option>', {
                        value: "",
                        // text: "Select Physician"
                    }))
                    console.log(response);

                    response.business.forEach(function (item) {
                        console.log(item);
                        contact.value = item.contact;
                        email.value = item.email;
                        faxnumber.value = item.faxNumber;

                        business.append(
                            $('<option>', {
                                value: item.businessId,
                                text: item.businessName
                            }));
                        console.log("fetch success");
                    });
                },
                error: function (xhr, status, error) {
                    console.error(error);
                }
            });
        });
    </script>
}
